<!-- projects.component.html -->
<div
  class="h-screen w-full flex flex-col  relative overflow-hidden"
>
<app-three-background-projects></app-three-background-projects>
  <!-- Header Section -->
  <div class="relative z-10 mt-6 mb-4">
    <div class="max-w-7xl mx-auto px-6">
      <!-- Main Title with Holographic Effect -->
      <div class="text-center mb-2">
        <h1
          class="text-3xl md:text-4xl lg:text-6xl font-black bg-gradient-to-r from-cyan-400 via-purple-400 to-pink-400 bg-clip-text text-transparent tracking-[0.2em] font-mono relative group mb-1"
        >
          PROJECTS
          <div
            class="absolute inset-0 bg-gradient-to-r from-cyan-400/20 via-purple-400/20 to-pink-400/20 blur-xl -z-10 group-hover:blur-2xl transition-all duration-700"
          ></div>
        </h1>

        <!-- Subtitle -->
        <div class="relative">
          <p
            class="text-slate-300 text-xl md:text-2xl lg:text-3xl font-light tracking-[0.15em] mb-2"
          >
            <span
              class="bg-gradient-to-r from-cyan-300 to-purple-300 bg-clip-text text-transparent"
            >
              Crafting Tomorrow's Digital Experiences
            </span>
          </p>

          <!-- Futuristic accent lines -->
          <div class="flex justify-center items-center gap-4 my-2">
            <div
              class="h-px w-16 bg-gradient-to-r from-transparent to-cyan-400/50"
            ></div>
            <div
              class="w-2 h-2 bg-purple-400/60 rounded-full animate-pulse"
            ></div>
            <div
              class="h-px w-32 bg-gradient-to-r from-cyan-400/50 via-purple-400/50 to-pink-400/50"
            ></div>
            <div
              class="w-2 h-2 bg-cyan-400/60 rounded-full animate-pulse delay-300"
            ></div>
            <div
              class="h-px w-16 bg-gradient-to-l from-transparent to-pink-400/50"
            ></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <section class="flex flex-col relative z-10 flex-1 overflow-hidden">
    <div
      class="scrollable-area overflow-y-auto flex-1 scroll-smooth px-6 custom-scrollbar-container"
      #scrollContainer
      (scroll)="onScroll()"
    >
      <!-- Filter Controls -->
      <div class="max-w-6xl mx-auto px-6 mb-8">
        <div
          class="flex flex-col items-center gap-y-8"
          aria-label="Skill Filters"
        >
          <!-- Container for both filters -->
          <div
            class="relative w-full flex flex-col md:flex-row gap-4 items-start"
          >
            <!-- Main Category Filters - left side on desktop, above on mobile -->
            <div
              class="relative order-1 md:order-1 w-full md:w-auto max-w-2xl mx-auto"
            >
              <!-- Background glow -->
              <div
                class="absolute inset-0 bg-gradient-to-r from-cyan-500/10 via-purple-500/10 to-pink-500/10 rounded-3xl blur-xl"
              ></div>

              <div
                class="relative flex flex-wrap justify-center gap-4 p-4 bg-slate-900/60 rounded-3xl backdrop-blur-xl border border-slate-700/40 shadow-2xl"
              >
                <button
                  *ngFor="let category of categories"
                  (click)="setCategory(category)"
                  [ngClass]="{
                    'bg-gradient-to-r text-white shadow-2xl scale-110 shadow-purple-500/25':
                      activeCategory === category,
                    'text-slate-400 hover:text-white hover:bg-slate-800/60 hover:scale-105':
                      activeCategory !== category
                  }"
                  [class]="
                    activeCategory === category
                      ? category === 'production'
                        ? 'from-cyan-500 to-purple-500'
                        : 'from-purple-500 to-pink-500'
                      : ''
                  "
                  [attr.aria-pressed]="activeCategory === category"
                  class="flex flex-col items-center justify-center min-w-[100px] px-4 py-2 rounded-xl transition-all duration-500 font-bold tracking-[0.1em] text-xs border border-transparent hover:border-slate-600/30"
                >
                  <span class="uppercase">{{ category }}</span>
                </button>
              </div>
            </div>
            <!-- Sub Filters - right side on desktop, below on mobile -->
            <div class="relative order-2 md:order-2 md:w-auto w-full mt-1">
              <!-- Background glow -->
              <div
                class="absolute inset-0 bg-gradient-to-r from-blue-500/5 via-green-500/5 to-purple-500/5 rounded-2xl blur-lg"
              ></div>

              <div
                class="relative flex flex-wrap justify-center gap-2 p-3 bg-slate-900/50 rounded-2xl backdrop-blur-md border border-slate-700/30"
              >
                <button
                  *ngFor="let sub of ['frontend', 'backend', 'other']"
                  (click)="setSubFilter(sub)"
                  [ngClass]="{
                    'bg-gradient-to-r text-white shadow-lg scale-105':
                      activeSubFilter === sub,
                    'text-slate-400 hover:text-white hover:bg-slate-800/50 hover:scale-102':
                      activeSubFilter !== sub
                  }"
                  [class]="
                    activeSubFilter === sub
                      ? sub === 'frontend'
                        ? 'from-blue-500 to-blue-400'
                        : sub === 'backend'
                        ? 'from-green-500 to-emerald-400'
                        : 'from-purple-500 to-pink-400'
                      : ''
                  "
                  [attr.aria-pressed]="activeSubFilter === sub"
                  class="flex flex-col items-center justify-center min-w-[80px] px-4 py-2 rounded-xl text-xs transition-all duration-400 font-semibold tracking-wide border border-transparent hover:border-slate-600/20"
                >
                  <span class="capitalize">{{ sub }}</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Projects Grid -->
      <div class="relative z-10 max-w-7xl mx-auto px-6 pb-24">
        <div
          class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5 items-stretch"
        >
          <div
            class="group relative flex flex-col h-full bg-slate-800/20 backdrop-blur-xl border border-slate-700/30 rounded-3xl p-4 hover:border-slate-600/50 transition-all duration-500 hover:scale-[1.02] hover:shadow-2xl hover:shadow-purple-500/10"
            *ngFor="let project of filteredProjects; trackBy: trackByProject"
          >
            <!-- Holographic Border -->
            <div
              class="absolute -inset-px bg-gradient-to-r from-cyan-500/0 via-purple-500/0 to-pink-500/0 group-hover:from-cyan-500/20 group-hover:via-purple-500/20 group-hover:to-pink-500/20 rounded-3xl transition-all duration-700 -z-10"
            ></div>

            <!-- Image or Placeholder -->
            <div
              class="relative mb-4 h-48 rounded-2xl overflow-hidden bg-slate-900/50"
              *ngIf="project.image"
            >
              <img
                [src]="project.image"
                [alt]="project.title"
                class="w-full h-full object-cover transition-all duration-500 group-hover:scale-110"
              />
              <div
                class="absolute inset-0 bg-gradient-to-t from-slate-900/80 via-transparent to-transparent"
              ></div>
              <div
                class="absolute inset-0 bg-gradient-to-br from-transparent via-transparent to-purple-500/10 opacity-0 group-hover:opacity-100 transition-all duration-500"
              ></div>
            </div>

            <ng-template #placeholder>
              <div
                class="relative mb-6 h-48 rounded-2xl bg-gradient-to-br from-slate-800/50 to-slate-900/50 flex items-center justify-center border border-slate-700/30"
              >
                <div
                  class="text-slate-500 text-6xl group-hover:text-slate-400 transition-colors duration-300"
                >
                  <svg
                    width="48"
                    height="48"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="1.5"
                    class="w-12 h-12"
                  >
                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                    <circle cx="8.5" cy="8.5" r="1.5" />
                    <polyline points="21,15 16,10 5,21" />
                  </svg>
                </div>
              </div>
            </ng-template>

            <!-- Title and Status -->
            <div class="flex items-start justify-between mb-3 gap-3">
              <h3
                class="text-xl font-bold text-white group-hover:text-cyan-300 transition-colors duration-300 tracking-wide font-mono leading-tight"
              >
                {{ project.title }}
              </h3>
              <span
                class="me-3 px-4 py-1.5 rounded-full text-xs font-semibold tracking-wider border transition-all duration-300 whitespace-nowrap flex-shrink-0"
                [ngClass]="{
                  'bg-green-500/15 text-green-300 border-green-400/30':
                    project.status.toLowerCase() === 'live',
                  'bg-blue-500/15 text-blue-300 border-blue-400/30':
                    project.status.toLowerCase() === 'completed',
                  'bg-yellow-500/15 text-yellow-300 border-yellow-400/30':
                    project.status.toLowerCase() === 'in progress',
                  'bg-gray-500/15 text-gray-300 border-gray-400/30':
                    project.status.toLowerCase() !== 'live' &&
                    project.status.toLowerCase() !== 'completed' &&
                    project.status.toLowerCase() !== 'in progress'
                }"
              >
                {{ project.status | titlecase }}
              </span>
            </div>

            <!-- Description -->
            <p
              class="text-slate-400 text-sm leading-relaxed mb-6 group-hover:text-slate-300 transition-colors duration-300 line-clamp-3"
            >
              {{ project.description }}
            </p>

            <!-- Tech Stack -->
            <div class="flex flex-wrap gap-2 mb-6">
              <span
                class="px-3 py-1.5 text-xs font-medium bg-slate-700/40 text-slate-300 rounded-lg border border-slate-600/30 hover:border-slate-500/50 hover:bg-slate-700/60 transition-all duration-300 cursor-default"
                *ngFor="let tech of project.tech"
              >
                {{ tech }}
              </span>
            </div>

            <!-- Action Buttons -->
            <div class="flex gap-3 mt-auto">
              <!-- Live -->
              <button
                *ngIf="project.live"
                class="flex-1 group/btn relative px-4 py-3 text-xs font-semibold rounded-xl bg-gradient-to-r from-cyan-500/20 to-blue-500/20 border border-cyan-400/30 text-cyan-300 hover:from-cyan-500/30 hover:to-blue-500/30 hover:border-cyan-400/50 hover:text-white transition-all duration-300 overflow-hidden"
                (click)="openLink(project.live!)"
              >
                <span
                  class="relative z-10 justify-center flex items-center gap-2"
                >
                  <span>🚀</span><span>Live Demo</span>
                </span>
                <div
                  class="absolute inset-0 bg-gradient-to-r from-cyan-500/0 to-blue-500/0 group-hover/btn:from-cyan-500/10 group-hover/btn:to-blue-500/10 transition-all duration-300"
                ></div>
              </button>

              <div
                *ngIf="!project.live"
                class="flex-1 px-4 py-3 text-xs font-semibold rounded-xl bg-slate-700/30 border border-slate-600/30 text-slate-500 text-center"
              >
                <span class="justify-center flex items-center gap-2">
                  <span>🔒</span><span>No Demo</span>
                </span>
              </div>

              <!-- Code -->
              <button
                *ngIf="project.github"
                class="flex-1 group/btn relative px-4 py-3 text-xs font-semibold rounded-xl bg-gradient-to-r from-purple-500/20 to-pink-500/20 border border-purple-400/30 text-purple-300 hover:from-purple-500/30 hover:to-pink-500/30 hover:border-purple-400/50 hover:text-white transition-all duration-300 overflow-hidden"
                (click)="openLink(project.github!)"
              >
                <span
                  class="relative z-10 justify-center flex items-center gap-2"
                >
                  <span>💻</span><span>Code</span>
                </span>
                <div
                  class="absolute inset-0 bg-gradient-to-r from-purple-500/0 to-pink-500/0 group-hover/btn:from-purple-500/10 group-hover/btn:to-pink-500/10 transition-all duration-300"
                ></div>
              </button>

              <div
                *ngIf="!project.github"
                class="flex-1 px-4 py-3 text-xs font-semibold rounded-xl bg-slate-700/30 border border-slate-600/30 text-slate-500 text-center"
              >
                <span class="justify-center flex items-center gap-2">
                  <span>🔐</span><span>Private</span>
                </span>
              </div>
            </div>

            <!-- Decorative Corners -->
            <div
              class="absolute top-6 left-6 w-1 h-1 bg-cyan-400 rounded-full opacity-0 group-hover:opacity-100 transition-all duration-500 group-hover:w-3 group-hover:h-3"
            ></div>
            <div
              class="absolute bottom-6 right-6 w-1 h-1 bg-purple-400 rounded-full opacity-0 group-hover:opacity-100 transition-all duration-500 delay-100 group-hover:w-3 group-hover:h-3"
            ></div>
          </div>
        </div>
        <!-- Empty State -->
        <div class="text-center py-24" *ngIf="filteredProjects.length === 0">
          <div class="text-8xl mb-8 opacity-50">🔍</div>
          <h3 class="text-3xl font-bold text-white mb-6 tracking-wide">
            No Projects Found
          </h3>
          <p class="text-slate-400 text-xl leading-relaxed max-w-md mx-auto">
            Try adjusting your filters to discover more projects.
          </p>
        </div>
      </div>
    </div>
  </section>
  <!-- Ambient Background Effects -->
  <div class="fixed inset-0 pointer-events-none -z-10">
    <div
      class="absolute top-1/4 left-1/4 w-96 h-96 bg-cyan-500/5 rounded-full blur-3xl animate-pulse"
    ></div>
    <div
      class="absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl animate-pulse delay-1000"
    ></div>
    <div
      class="absolute top-1/2 right-1/3 w-64 h-64 bg-pink-500/3 rounded-full blur-3xl animate-pulse delay-2000"
    ></div>
  </div>
</div>
